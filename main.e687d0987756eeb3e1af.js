(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"69Hw":function(e,n,t){var a=t("mp5j");e.exports=(a.default||a).template({1:function(e,n,t,a,l){var o,r,i=null!=n?n:e.nullContext||{},s=e.hooks.helperMissing,c=e.escapeExpression,d=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'<li class="trend-item" data-id=\''+c("function"==typeof(r=null!=(r=d(t,"id")||(null!=n?d(n,"id"):n))?r:s)?r.call(i,{name:"id",hash:{},data:l,loc:{start:{line:2,column:32},end:{line:2,column:38}}}):r)+'\'>\r\n    <a class="trend-link" href="#">\r\n        <div class="trend-thumb">\r\n'+(null!=(o=d(t,"if").call(i,null!=n?d(n,"poster_path"):n,{name:"if",hash:{},fn:e.program(2,l,0),inverse:e.program(4,l,0),data:l,loc:{start:{line:5,column:12},end:{line:11,column:19}}}))?o:"")+'        </div>\r\n        <h1 class="trend-title">'+c("function"==typeof(r=null!=(r=d(t,"title")||(null!=n?d(n,"title"):n))?r:s)?r.call(i,{name:"title",hash:{},data:l,loc:{start:{line:13,column:32},end:{line:13,column:41}}}):r)+'</h1>\r\n        <div class="trend-text">\r\n            <p class="trend-genre data">'+c("function"==typeof(r=null!=(r=d(t,"genre_ids")||(null!=n?d(n,"genre_ids"):n))?r:s)?r.call(i,{name:"genre_ids",hash:{},data:l,loc:{start:{line:15,column:40},end:{line:15,column:53}}}):r)+" | "+c("function"==typeof(r=null!=(r=d(t,"release_date")||(null!=n?d(n,"release_date"):n))?r:s)?r.call(i,{name:"release_date",hash:{},data:l,loc:{start:{line:15,column:56},end:{line:15,column:72}}}):r)+"</p>\r\n        </div>\r\n    </a>\r\n</li>\r\n"},2:function(e,n,t,a,l){var o,r=null!=n?n:e.nullContext||{},i=e.hooks.helperMissing,s=e.escapeExpression,c=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'            <img class="trend-poster" src="https://image.tmdb.org/t/p/w500'+s("function"==typeof(o=null!=(o=c(t,"poster_path")||(null!=n?c(n,"poster_path"):n))?o:i)?o.call(r,{name:"poster_path",hash:{},data:l,loc:{start:{line:6,column:74},end:{line:6,column:89}}}):o)+'" alt="'+s("function"==typeof(o=null!=(o=c(t,"media_type")||(null!=n?c(n,"media_type"):n))?o:i)?o.call(r,{name:"media_type",hash:{},data:l,loc:{start:{line:6,column:96},end:{line:6,column:110}}}):o)+'"\r\n                data-type="'+s("function"==typeof(o=null!=(o=c(t,"media_type")||(null!=n?c(n,"media_type"):n))?o:i)?o.call(r,{name:"media_type",hash:{},data:l,loc:{start:{line:7,column:27},end:{line:7,column:41}}}):o)+'" data-src="'+s("function"==typeof(o=null!=(o=c(t,"id")||(null!=n?c(n,"id"):n))?o:i)?o.call(r,{name:"id",hash:{},data:l,loc:{start:{line:7,column:53},end:{line:7,column:59}}}):o)+'" height="400">\r\n'},4:function(e,n,t,a,l){var o,r=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'            <img class="trend-poster" src="https://i.pinimg.com/736x/83/46/1d/83461d0ef2351335f037cb38f42cbac7.jpg"\r\n                data-src="'+e.escapeExpression("function"==typeof(o=null!=(o=r(t,"id")||(null!=n?r(n,"id"):n))?o:e.hooks.helperMissing)?o.call(null!=n?n:e.nullContext||{},{name:"id",hash:{},data:l,loc:{start:{line:10,column:26},end:{line:10,column:32}}}):o)+'" height="400" />\r\n'},compiler:[8,">= 4.3.0"],main:function(e,n,t,a,l){var o;return null!=(o=(e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]})(t,"each").call(null!=n?n:e.nullContext||{},n,{name:"each",hash:{},fn:e.program(1,l,0),inverse:e.noop,data:l,loc:{start:{line:1,column:0},end:{line:20,column:9}}}))?o:""},useData:!0})},QfWi:function(e,n,t){"use strict";t.r(n);t("SgDD"),t("yjly"),t("mcqT"),t("JBxO"),t("FdtR");var a=t("zkry"),l=t.n(a),o=t("dcBu"),r=(t("uDJT"),t("RtS0"),t("3dw1"),t("SzhR"));t("VwVG"),t("ELjB"),t("5O+r");r.a.initializeApp({apiKey:"AIzaSyA0wFqssa1iGGeTQCKmksr66cMMVCSABlU",authDomain:"prada-5d339.firebaseapp.com",databaseURL:"https://prada-5d339-default-rtdb.firebaseio.com",projectId:"prada-5d339",storageBucket:"prada-5d339.appspot.com",messagingSenderId:"514379101865",appId:"1:514379101865:web:f8fddd7c1adb579b635bb8"}),document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelectorAll(".modal");M.Modal.init(e);var n=document.querySelectorAll(".collapsible");M.Collapsible.init(n)}));var i=r.a.auth(),s=r.a.firestore();s.settings({timestampsInSnapshots:!0});var c={auth:i,db:s},d=t("69Hw"),u=t.n(d),p=(t("KzXF"),t("QJ3N")),m=(t("zrP5"),t("bzha"),document.querySelector(".guides"),document.querySelectorAll(".logged-out")),f=document.querySelectorAll(".logged-in"),h=document.querySelector(".account-details"),y=document.querySelector(".section-watched"),v=document.querySelector(".list-watched"),g=document.querySelector(".watched-btn"),b=document.querySelector(".queue-btn"),w=document.querySelector(".section-queue"),q=document.querySelector(".list-queue"),k=document.querySelector(".section-trend");function _(e){g.style.display="inline",b.style.display="inline",w.style.display="block",k.style.display="none",y.style.display="none",w.addEventListener("click",j)}document.querySelector(".home").addEventListener("click",(function(){y.style.display="none",w.style.display="none",g.style.display="none",b.style.display="none",k.style.display="block"})),g.addEventListener("click",(function(){w.style.display="none",y.style.display="block"})),b.addEventListener("click",(function(){w.style.display="block",y.style.display="none"}));var S=function(e){e?(c.db.collection("users").doc(e.uid).get().then((function(n){var t="\n        <div>Logged in as "+e.email+"</div>\n        <div>Nick-name "+n.data().bio+"</div>\n        ";h.innerHTML=t})),f.forEach((function(e){return e.style.display="block"})),f[1].addEventListener("click",_),m.forEach((function(e){return e.style.display="none"}))):(h.innerHTML="",f.forEach((function(e){return e.style.display="none"})),m.forEach((function(e){return e.style.display="block"})))},P=function(e,n){if(e){var t,a;t=u()(e),a=u()(n),q.innerHTML=t,v.innerHTML=a}};c.auth.onAuthStateChanged((function(e){e?c.db.collection("users").doc(e.uid).onSnapshot((function(n){P(n.data().queue,n.data().watched),S(e)}),(function(e){console.log(e)})):(S(),P())}));var L=document.querySelector("#signup-form");L.addEventListener("submit",(function(e){e.preventDefault();var n=L["signup-email"].value,t=L["signup-password"].value;t===L["confirm-password"].value?c.auth.createUserWithEmailAndPassword(n,t).then((function(e){return c.db.collection("users").doc(e.user.uid).set({bio:L["signup-bio"].value,queue:[],watched:[]})})).then((function(){p.success({text:"Ргистрация прошла успешно",delay:1e3,addClass:"PNotify",addModalClass:"PNotify",addModelessClass:"PNotify"});var e=document.querySelector("#modal-signup");M.Modal.getInstance(e).close(),L.reset()})).catch(p.success({text:"пароль должен содержать не мение 6 симвалов",delay:1e3,addClass:"PNotify",addModalClass:"PNotify",addModelessClass:"PNotify"})):p.success({text:"Не коректное подтверждени пароля",delay:1e3,addClass:"PNotify",addModalClass:"PNotify",addModelessClass:"PNotify"})})),document.querySelector("#logout").addEventListener("click",(function(e){e.preventDefault(),q.innerHTML="",v.innerHTML="",y.style.display="none",w.style.display="none",k.style.display="block",c.auth.signOut(),p.success({text:"Вы покинули свой аккаунт",delay:1e3,addClass:"PNotify",addModalClass:"PNotify",addModelessClass:"PNotify"})}));var E=document.querySelector("#login-form");E.addEventListener("submit",(function(e){e.preventDefault();var n=E["login-email"].value,t=E["login-password"].value;c.auth.signInWithEmailAndPassword(n,t).then((function(e){var n=document.querySelector("#modal-login");M.Modal.getInstance(n).close(),E.reset()})),p.success({text:"С возвращением!",delay:1e3,addClass:"PNotify",addModalClass:"PNotify",addModelessClass:"PNotify"})}));var x="";var N={addToQueue:function(){c.auth.onAuthStateChanged((function(e){c.db.collection("users").doc(e.uid).update({queue:r.a.firestore.FieldValue.arrayUnion(x)})})),p.success({text:"Картачка добавлена в Queue",delay:1e3,addClass:"PNotify",addModalClass:"PNotify",addModelessClass:"PNotify"})},getCard:function(e){x=e},addToWatched:function(){c.auth.onAuthStateChanged((function(e){c.db.collection("users").doc(e.uid).update({queue:r.a.firestore.FieldValue.arrayRemove(x),watched:r.a.firestore.FieldValue.arrayUnion(x)})})),p.success({text:"Картачка добавлена в Watched",delay:1e3,addClass:"PNotify",addModalClass:"PNotify",addModelessClass:"PNotify"})}},C=document.querySelector(".section-trend");function T(e){e.preventDefault();var n=e.target.dataset.src;e.target.dataset.type;fetch("https://api.themoviedb.org/3/movie/"+n+"?api_key=ebb87b3c3ccf067a0867ba65db09dab4&language=en-US&external_source=imdb_id").then((function(e){return e.json()})).then((function(e){var n=l()(e);o.create("\n    \n        "+n+'\n        \n        <button type="button" class="modal-close-button" data-action="close-modal"></button>\n    \n',{onShow:function(n){n.element().querySelector(".modal-close-button").onclick=n.close,n.element().querySelector(".modal-box").addEventListener("click",N.getCard(e)),n.element().querySelector(".to-watched").addEventListener("click",N.addToWatched),n.element().querySelector(".add-to-queue").addEventListener("click",N.addToQueue)}}).show()})).catch((function(e){return console.log(e)}))}C.addEventListener("click",T);var j=T,A=(t("wcNg"),t("czhI")),O=t.n(A);t("lmye"),t("WB5j"),t("D/wG");function W(e,n,t,a,l,o,r){try{var i=e[o](r),s=i.value}catch(e){return void t(e)}i.done?n(s):Promise.resolve(s).then(a,l)}var H="ebb87b3c3ccf067a0867ba65db09dab4",D={fetchTrendMovie:function(e){var n,t=this;return(n=regeneratorRuntime.mark((function n(){var a,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return void 0===e&&(e=1),O.a.defaults.baseURL="https://api.themoviedb.org/3/trending/movie/day?api_key="+H+"&page="+e,n.prev=2,n.next=5,O.a.get();case 5:if(200===(a=n.sent).status){n.next=8;break}throw new Error("error");case 8:return l=a.data.results,t.getAvailWidth(l),n.abrupt("return",t.requestParamTrend(l));case 13:throw n.prev=13,n.t0=n.catch(2),console.log(n.t0),new Error("Error fetching data");case 17:case"end":return n.stop()}}),n,null,[[2,13]])})),function(){var e=this,t=arguments;return new Promise((function(a,l){var o=n.apply(e,t);function r(e){W(o,a,l,r,i,"next",e)}function i(e){W(o,a,l,r,i,"throw",e)}r(void 0)}))})()},requestParamTrend:function(e){return fetch("https://api.themoviedb.org/3/genre/movie/list?api_key="+H+"&language=en-US").then((function(e){return e.json()})).then((function(n){var t=n.genres;return e.map((function(e){var n=e.release_date,a=e.poster_path,l=e.title,o=e.id,r=e.media_type,i=e.genre_ids;return n=n.slice(0,4),i.forEach((function(e,n){t.map((function(t){var a=t.id,l=t.name;e===a&&(i[n]=" ",i[n]+=l)}))})),{release_date:n,poster_path:a,title:l,id:o,media_type:r,genre_ids:i}}))}))},getAvailWidth:function(e){e.length=9,screen.availWidth<767&&(e.length=4,console.log(e.length)),screen.availWidth>=768&&screen.availWidth<=1023&&(e.length=8,console.log(e.length))}},R={movies:document.querySelector(".trend-movies-js")};var U=function(e){var n=u()(e);R.movies.insertAdjacentHTML("beforeend",n)};function I(e,n,t,a,l,o,r){try{var i=e[o](r),s=i.value}catch(e){return void t(e)}i.done?n(s):Promise.resolve(s).then(a,l)}var z=document.querySelector(".search-form"),F=document.querySelector(".trend-movies-js"),Q=document.querySelector(".logo-link"),V=document.querySelector(".navigation-link");function B(){D.fetchTrendMovie().then((function(e){F.innerHTML="",z.reset(),U(e),console.log("click")}))}z.addEventListener("submit",(function(e){e.preventDefault()})),V.addEventListener("click",B),Q.addEventListener("click",B);var G=function(e,n){return(t=regeneratorRuntime.mark((function t(){var a,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===n&&(n=1),O.a.defaults.baseURL="https://api.themoviedb.org/3/search/movie?api_key=ebb87b3c3ccf067a0867ba65db09dab4&language=en-US&include_adult=false&query="+e+"&page="+n,t.prev=2,t.next=5,O.a.get();case 5:return a=t.sent,l=a.data.results,D.getAvailWidth(l),t.abrupt("return",D.requestParamTrend(l));case 11:throw t.prev=11,t.t0=t.catch(2),console.log(t.t0),new Error("Error fetching data");case 15:case"end":return t.stop()}}),t,null,[[2,11]])})),function(){var e=this,n=arguments;return new Promise((function(a,l){var o=t.apply(e,n);function r(e){I(o,a,l,r,i,"next",e)}function i(e){I(o,a,l,r,i,"throw",e)}r(void 0)}))})();var t},J=(t("dx4m"),t("IvQZ"),t("fp7Y"),t("4NM0"),{movies:document.querySelector(".trend-movies-js")}),K=document.querySelector(".trend-movies-js"),X=document.querySelector(".js-input"),Y=document.querySelector(".pagination ul"),Z=1;function $(e,n){var t="",a=n-1,l=n+1;n>1&&(screen.availWidth<767?t+='<li class="btn prev paginatorPrev"><span><i class="fas fa-angle-left"></i><</span></li>':t+='<li class="btn prev paginatorPrev"><span><i class="fas fa-angle-left"></i> Prev</span></li>'),n>2&&(t+='<li class="first numb paginatorFirst"><span>1</span></li>',n>3&&(t+='<li class="dots"><span>...</span></li>')),n==e?a-=2:n==e-1&&(a-=1),1==n?l+=2:2==n&&(l+=1);for(var o=a;o<=l;o++)console.log(o),o>e||(0==o&&(o+=1),t+='<li class="numb paginatorNumb '+(n==o?"active":"")+"\" data-number='"+o+'\'><span class="spanNumber">'+o+"</span></li>");return n<e-1&&(n<e-2&&(t+='<li class="dots"><span>...</span></li>'),t+='<li class="last numb paginatorLast"><span>'+e+"</span></li>"),n<e&&(screen.availWidth<767?t+='<li class="btn next paginatorNext"><span>><i class="fas fa-angle-right"></i></span></li>':t+='<li class="btn next paginatorNext"><span>Next<i class="fas fa-angle-right"></i></span></li>'),Y.innerHTML=t,t}Y.innerHTML=$(30,Z),Y.addEventListener("click",(function(e){e.target.className.includes("paginatorNumb")?(Z=e.target.dataset.number,console.log(e.target.dataset.number)):e.target.className.includes("paginatorFirst")?Z=1:e.target.className.includes("paginatorPrev")?Z-=1:e.target.className.includes("paginatorLast")?Z=30:e.target.className.includes("paginatorNext")&&(Z=Number(Z)+1);var n=X.value;n?G(n,Z).then((function(e){K.innerHTML="",$(30,Z),U(e),window.scrollTo(0,0)})):D.fetchTrendMovie(Z).then((function(e){J.movies.innerHTML="",$(30,Z),U(e),window.scrollTo(0,0)}))}));var ee=t("jffb"),ne=t.n(ee);D.fetchTrendMovie().then((function(e){U(e)}));var te=document.querySelector(".js-input"),ae=document.querySelector(".trend-movies-js"),le=document.querySelector(".loader");le.hidden=!0,te.addEventListener("input",ne()((function(){var e=te.value.trim();e&&(ae.innerHTML="",le.hidden=!1,G(e).then((function(e){U(e),le.hidden=!0})))}),1500))},dx4m:function(e,n){var t=document.querySelector('a[data-action="open-modal"]'),a=document.querySelector('button[data-action="close-modal"]'),l=document.querySelector(".js-backdrop");function o(){window.removeEventListener("keydown",r),document.body.classList.remove("show-modal")}function r(e){"Escape"===e.code&&o()}t.addEventListener("click",(function(e){e.preventDefault(),window.addEventListener("keydown",r),document.body.classList.add("show-modal")})),a.addEventListener("click",o),l.addEventListener("click",(function(e){e.target===e.currentTarget&&o()}))},mcqT:function(e,n){},yjly:function(e,n,t){},zkry:function(e,n,t){var a=t("mp5j");e.exports=(a.default||a).template({1:function(e,n,t,a,l){var o=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return"<li>"+e.escapeExpression(e.lambda(null!=n?o(n,"name"):n,n))+"</li>"},compiler:[8,">= 4.3.0"],main:function(e,n,t,a,l){var o,r,i=null!=n?n:e.nullContext||{},s=e.hooks.helperMissing,c="function",d=e.escapeExpression,u=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'<div class="modal-box">\r\n    <div class="modal-section-img">\r\n\r\n        <img class="modal-image" src="https://www.themoviedb.org/t/p/w600_and_h900_bestv2'+d(typeof(r=null!=(r=u(t,"poster_path")||(null!=n?u(n,"poster_path"):n))?r:s)===c?r.call(i,{name:"poster_path",hash:{},data:l,loc:{start:{line:4,column:89},end:{line:4,column:104}}}):r)+'"\r\n            alt="'+d(typeof(r=null!=(r=u(t,"original_name")||(null!=n?u(n,"original_name"):n))?r:s)===c?r.call(i,{name:"original_name",hash:{},data:l,loc:{start:{line:5,column:17},end:{line:5,column:34}}}):r)+' poster"">\r\n\r\n    </div>\r\n    <div class=" modal-description">\r\n        <h2 class="modal-description-title">'+d(typeof(r=null!=(r=u(t,"original_name")||(null!=n?u(n,"original_name"):n))?r:s)===c?r.call(i,{name:"original_name",hash:{},data:l,loc:{start:{line:9,column:44},end:{line:9,column:61}}}):r)+d(typeof(r=null!=(r=u(t,"title")||(null!=n?u(n,"title"):n))?r:s)===c?r.call(i,{name:"title",hash:{},data:l,loc:{start:{line:9,column:61},end:{line:9,column:70}}}):r)+'</h2>\r\n        <div class="modal-info">\r\n            <ul class="modal-info-list">\r\n                <li>Vote / Votes</li>\r\n                <li>Popularity</li>\r\n                <li>Original Title</li>\r\n                <li>Genre</li>\r\n            </ul>\r\n            <ul class="modal-info-list">\r\n                <li><span>'+d(typeof(r=null!=(r=u(t,"vote_average")||(null!=n?u(n,"vote_average"):n))?r:s)===c?r.call(i,{name:"vote_average",hash:{},data:l,loc:{start:{line:18,column:26},end:{line:18,column:42}}}):r)+"</span>/<span>"+d(typeof(r=null!=(r=u(t,"vote_count")||(null!=n?u(n,"vote_count"):n))?r:s)===c?r.call(i,{name:"vote_count",hash:{},data:l,loc:{start:{line:18,column:56},end:{line:18,column:70}}}):r)+"</span></li>\r\n                <li>"+d(typeof(r=null!=(r=u(t,"popularity")||(null!=n?u(n,"popularity"):n))?r:s)===c?r.call(i,{name:"popularity",hash:{},data:l,loc:{start:{line:19,column:20},end:{line:19,column:34}}}):r)+"</li>\r\n                <li>"+d(typeof(r=null!=(r=u(t,"original_title")||(null!=n?u(n,"original_title"):n))?r:s)===c?r.call(i,{name:"original_title",hash:{},data:l,loc:{start:{line:20,column:20},end:{line:20,column:38}}}):r)+d(typeof(r=null!=(r=u(t,"original_name")||(null!=n?u(n,"original_name"):n))?r:s)===c?r.call(i,{name:"original_name",hash:{},data:l,loc:{start:{line:20,column:38},end:{line:20,column:55}}}):r)+"</li>\r\n\r\n                "+(null!=(o=u(t,"each").call(i,null!=n?u(n,"genres"):n,{name:"each",hash:{},fn:e.program(1,l,0),inverse:e.noop,data:l,loc:{start:{line:22,column:16},end:{line:22,column:63}}}))?o:"")+'\r\n\r\n            </ul>\r\n        </div>\r\n        <h3 class="about-title">ABOUT</h3>\r\n        <p class="about-text">'+d(typeof(r=null!=(r=u(t,"overview")||(null!=n?u(n,"overview"):n))?r:s)===c?r.call(i,{name:"overview",hash:{},data:l,loc:{start:{line:27,column:30},end:{line:27,column:42}}}):r)+'</p>\r\n        <div class="modal-buttons">\r\n            <button type="button" data-id="'+d(typeof(r=null!=(r=u(t,"id")||(null!=n?u(n,"id"):n))?r:s)===c?r.call(i,{name:"id",hash:{},data:l,loc:{start:{line:29,column:43},end:{line:29,column:49}}}):r)+'" class="to-watched">add to\r\n                Watched</button>\r\n            <button type="button" data-id="'+d(typeof(r=null!=(r=u(t,"id")||(null!=n?u(n,"id"):n))?r:s)===c?r.call(i,{name:"id",hash:{},data:l,loc:{start:{line:31,column:43},end:{line:31,column:49}}}):r)+'" class="add-to-queue">add to queue</button>\r\n\r\n        </div>\r\n\r\n    </div>'},useData:!0})}},[["QfWi",1,2]]]);
//# sourceMappingURL=main.e687d0987756eeb3e1af.js.map